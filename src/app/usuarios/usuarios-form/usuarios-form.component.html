<div class="row">
    <div class="col-md-12 grid-margin stretch-card">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Editar perfil</h4>
                <p class=“text-muted”>Edita tu perfil de usuario</p>
            </div>
        </div>
    </div>
</div>

<form [formGroup]="usuarioForm" (ngSubmit)="actualizarUsuario()" novalidate>

    <div class="row">

        <div class="grid-margin stretch-card">
            <div class="card">
                <div class="card-body">
                    <div class="mb-3">
                        <label class="form-label">Nick</label>
                        <input class="form-control" type="text" placeholder="Nick" name="nick" formControlName="nick"
                            required />
                        <p class="text-danger mt-1" *ngIf="usuarioForm.get('nick')?.errors?.required">Debes introducir
                            un nick</p>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Nombre</label>
                        <input class="form-control" type="text" placeholder="Nombre" name="nombre"
                            formControlName="nombre" required />
                        <p class="text-danger mt-1" *ngIf="usuarioForm.get('nombre')?.errors?.required">Debes introducir
                            un nombre</p>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Apellidos</label>
                        <input class="form-control" type="text" placeholder="Apellidos" name="apellidos"
                            formControlName="apellidos" required />
                        <p class="text-danger mt-1" *ngIf="usuarioForm.get('apellidos')?.errors?.required">Debes
                            introducir un apellido</p>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input class="form-control" type="text" placeholder="Email" name="email" formControlName="email"
                            required />
                        <p class="text-danger mt-1" *ngIf="usuarioForm.get('email')?.errors?.required">Debes introducir
                            un email</p>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Teléfono</label>
                        <input class="form-control" type="text" placeholder="Telefono" name="telefono"
                            formControlName="telefono" required />
                        <p class="text-danger mt-1" *ngIf="usuarioForm.get('telefono')?.errors?.required">Debes
                            introducir un teléfono</p>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Fecha de nacimiento</label>
                        <div class="input-group">
                            <input class="form-control" placeholder="yyyy-mm-dd" name="nacido" ngbDatepicker
                                #d="ngbDatepicker" formControlName="nacido" required />
                            <button class="input-group-text" type="button" (click)="d.toggle()">
                                <i class="feather icon-calendar icon-md text-muted"></i>
                            </button>
                        </div>
                        <p class="text-danger mt-1" *ngIf="usuarioForm.get('nacido')?.errors?.required">Debes introducir
                            una fecha de nacimiento</p>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Contraseña</label>
                        <input class="form-control" type="password" placeholder="Contraseña" name="contrasenya"
                            formControlName="contrasenya" />
                        <p class="text-danger mt-1" *ngIf="usuarioForm.get('contrasenya')?.errors?.required">Debes
                            introducir un contraseña</p>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Avatar</label>
                        <dropzone [config]="config" [message]="'Pulsa o arrastra una imagen'"
                            (addedFile)="onAddedFile($event)" #dz>
                            <div class="dz-message" style="text-align: center;">
                                <img [src]="avatar" alt="Imagen" *ngIf="avatar"
                                    style="max-width: 100%; max-height: 200px;">
                                <p *ngIf="!avatar">No se ha cargado ninguna imagen.</p>
                            </div>
                        </dropzone>
                        <button type="button" class="btn btn-secondary mt-2 m-auto w-100"
                            (click)="resetDropzone1Uploads()">Limpiar</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col">
            <button type="submit" class="btn btn-primary me-2">Enviar</button>
            <button type="button" class="btn btn-secondary" [routerLink]="['/usuarios', usuarioId]">Cancelar</button>
        </div>

        <div class="col-auto">
            <button type="button" class="btn btn-danger" (click)="openBajaModal(bajaModal)">
                <span class="mdi mdi-account-off"></span>
                Darse de baja
            </button>
        </div>
    </div>

</form>


<!-- Modal -->
<ng-template #bajaModal let-modal>
    <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Baja de usuario</h5>
        <button type="button" class="btn-close" (click)="modal.close()" aria-label="Cerrar"></button>
    </div>
    <div class="modal-body">
        <p>¿Desea darse de baja de EscapeRank?</p>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modal.close('')">Volver</button>
        <button type="button" class="btn btn-primary" (click)="modal.close('baja')">Quiero darme de baja</button>
    </div>
</ng-template>